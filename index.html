<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head runat="server">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Audiowide">
    <title>GAL Shaked</title>
    <style>
        img {
            opacity: 1.0;
        }

        img:hover {
            opacity: 1.0;
        }

        .img {
            opacity: 1.0;
        }

        body {
            font-family: Audiowide;
        }

        .stretch {
            background: no-repeat center center fixed;
            background-position-y: top;

            direction: rtl;
        }

        .ggg {
            direction: rtl;
            background: no-repeat center center fixed;
            background-size: cover;
            object-fit: cover;
            background-repeat: no-repeat;
            background-size: 120% 100%;
            background-image: url('https://wallpaperaccess.com/full/1314893.jpg');
        }

        .myButton {

            -moz-box-shadow: 0px 1px 0px 0px #1c1b18;
            -webkit-box-shadow: 0px 1px 0px 0px #1c1b18;
            box-shadow: 0px 1px 0px 0px #1c1b18;
            background-color: beige;
            -moz-border-radius: 20px;
            -webkit-border-radius: 20px;
            border-radius: 10px;
            border: 4px solid red;
            display: inline-block;
            cursor: pointer;
            color: #1c1b18;
            font-family: Calibri;
            font-size: 25px;
            font-weight: bold;
            padding: 12px 16px;
            text-decoration: none;
            text-shadow: 0px 1px 0px #1c1b18;
            border-color: black;
        }

        .myButton:hover {
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0.05, #ccc2a6), color-stop(1, #eae0c2));
            background: -moz-linear-gradient(top, #ccc2a6 5%, #eae0c2 100%);
            background: -webkit-linear-gradient(top, #ccc2a6 5%, #eae0c2 100%);
            background: -o-linear-gradient(top, #ccc2a6 5%, #eae0c2 100%);
            background: linear-gradient(to bottom, #ccc2a6 5%, #eae0c2 100%);
            background-color: black;
        }
    </style>
    <script type="text/javascript">
        function dealteTable() {
            var tb = document.getElementById("varible");
            while (tb.rows.length > 0) {
                tb.deleteRow(0);
            }
        }
        function crateTable() {
            dealteTable();
            var x = document.getElementById("varible");
            document.getElementById("submit").style.visibility = "visible";
            document.getElementById("sum").style.visibility = "hidden";

            x.style.visibility = "visible";
            x.style.cursor = "pointer";
            x.style.textAlign = "center";
            x.style.fontWeight = "900";
            if (document.getElementById('vehicle1').checked) {
                var rateValue = document.getElementById('vehicle1').value;
            }
            if (document.getElementById('vehicle2').checked) {
                var rateValue = document.getElementById('vehicle2').value;
            }
            if (document.getElementById('vehicle3').checked) {
                var rateValue = document.getElementById('vehicle3').value;
            }
            if (document.getElementById('vehicle4').checked) {
                var rateValue = document.getElementById('vehicle4').value;
            }


            for (var i = 0; i < rateValue; i++) {
                var row = x.insertRow(-1);
                var cell1 = row.insertCell(-1);
                var cell11 = row.insertCell(-1);
                var cell2 = row.insertCell(-1);
                var cell22 = row.insertCell(-1);

                cell1.style.fontSize = "18px";
                cell1.style.color = "black";
                cell1.innerHTML = "בארוחה" + " " + parseFloat(parseFloat(i) + 1) + " " + " קלוריות  ?";
                cell11.innerHTML = "<input id=cal" + (i + 1).toString() + " type='text'>";
                cell2.style.fontSize = "18px";
                cell2.style.color = "black";
                cell2.innerHTML = "בארוחה" + " " + parseFloat(parseFloat(i) + 1) + " " + " גרם חלבון  ?";
                cell22.innerHTML = "<input id=hal" + (i + 1).toString() + " type='text'>";

            }
        }
        function load() {

            var caloriotDay = document.getElementById("caloriotDay").value;
            if (isNaN(caloriotDay) || caloriotDay == "") {
                caloriotDay = 2900;
            }
            var helbonDay = document.getElementById("helbonDay").value;
            if (isNaN(helbonDay) || helbonDay == "") {
                helbonDay = 20;
            }

            if (document.getElementById('vehicle1').checked) {
                var rateValue = document.getElementById('vehicle1').value;
            }
            if (document.getElementById('vehicle2').checked) {
                var rateValue = document.getElementById('vehicle2').value;
            }
            if (document.getElementById('vehicle3').checked) {
                var rateValue = document.getElementById('vehicle3').value;
            }
            if (document.getElementById('vehicle4').checked) {
                var rateValue = document.getElementById('vehicle4').value;
            }


            //    alert(document.getElementById("cal1").value)
            var countEat = 5 - rateValue;
            var ccaloriotDay = 0;
            var chelbonDay = 0;
            for (var i = 0; i < rateValue; i++) {
                //  alert(document.getElementById("cal"+(i+1).toString()).value);
                cal = document.getElementById("cal" + (i + 1).toString()).value;
                if (isNaN(cal) || cal == "") {
                    document.getElementById("cal" + (i + 1).toString()).value = 0;
                    cal = 0;
                }
                ccaloriotDay = parseFloat(parseFloat(ccaloriotDay) + parseFloat(cal));
                hal = document.getElementById("hal" + (i + 1).toString()).value;
                if (isNaN(hal) || hal == "") {
                    document.getElementById("hal" + (i + 1).toString()).value = 0;
                    hal = 0;
                }
                chelbonDay = parseFloat(parseFloat(chelbonDay) + parseFloat(hal));
            }
            var calDish = (caloriotDay - ccaloriotDay) / countEat;
            var halDish = (helbonDay - chelbonDay) / countEat;
            var x = document.getElementById("sum");
            while (x.rows.length > 0) {
                x.deleteRow(0);
            }
            x.style.visibility = "visible";
            var row = x.insertRow(0);
            var cell1 = row.insertCell(0);
            var row = x.insertRow(-1);
            var cell2 = row.insertCell(0);
            var row = x.insertRow(-1);
            var cell3 = row.insertCell(0);
            cell1.style.fontSize = "18px";
            cell1.style.color = "black";
            cell1.innerHTML = "אתה צריך לאכול עוד " + countEat + " ארוחות, בכל הארוחה-";
            cell2.style.fontSize = "18px";
            cell2.style.color = "black";
            cell2.innerHTML = calDish + " קלוריות";
            cell3.style.fontSize = "18px";
            cell3.style.color = "black";
            cell3.innerHTML = halDish + " גרם חלבון";
            if (ccaloriotDay >= caloriotDay) {
                cell2.innerHTML = "אכלת מספיק קלוריות";
            }
            if (chelbonDay >= helbonDay) {
                cell3.innerHTML = "אכלת מספיק גרם חלבון";
            }
            //   alert("אתה צריך לאכול עוד " + countEat + " ארוחות , שבכל ארוחה " + caloriotDay / countEat + " קלוריות, " + helbonDay / countEat + " גרם חלבון");
        }

        function click(change) {
            document.getElementById("c"+change).disabled=false;
            document.getElementById("h"+change).disabled=false;
        }

        function chak(e, change) {
            if (e.value != "" && e.value != null && !isNaN(e.value)) {
                var c1 = document.getElementById("c1").value;
                var c2 = document.getElementById("c2").value;
                var c3 = document.getElementById("c3").value;
                var c4 = document.getElementById("c4").value;
                var c5 = document.getElementById("c5").value;
                var h1 = document.getElementById("h1").value;
                var h2 = document.getElementById("h2").value;
                var h3 = document.getElementById("h3").value;
                var h4 = document.getElementById("h4").value;
                var h5 = document.getElementById("h5").value;
                var countC = 0;
                var countH = 0;
                var sumC = 0;
                var sumH = 0;
                var caloriotDay = document.getElementById("caloriotDay").value;
                var helbonDay = document.getElementById("helbonDay").value;
                var number = change.split("c");
                number[1] = parseFloat(number[1]) + 1;

                var number2 = change.split("h");
                number2[1] = parseFloat(number2[1]) + 1;

                for (var i = 1; i < 6; i++) {
                    if (document.getElementById("c" + i.toString()).disabled)
                    {
                        countC++;
                    }
                    else
                    {
                        sumC+=parseInt(document.getElementById("c" + i.toString()).value);
                    }
                    if (document.getElementById("h" + i.toString()).disabled)
                    {
                        countH++;
                    }
                    else
                    {
                        sumH+=parseInt(document.getElementById("h" + i.toString()).value);
                    }
                }
            
                // if()
                // alert("sum= "+parseFloat(caloriotDay-sumC)+ " lhalk= "+countC);
                // alert(parseFloat(caloriotDay-sumC)/countC);
                 for (var i = 1; i < 6; i++) {
                    if (document.getElementById("c" + i.toString()).disabled)
                    {
                        document.getElementById("c" + i.toString()).value =parseFloat(caloriotDay-sumC)/countC;

                        if(parseFloat(caloriotDay-sumC)/countC<0)
                        document.getElementById("c" + i.toString()).value="אין צורך";

                    }
                }
            }
            else {
                document.getElementById(change).value = document.getElementById(change).value.slice(0, document.getElementById(change).value.length - 1);
            }
        }

        function loadd() {
            document.getElementById("c1").onkeyup = function () { chak(this, "c1") }
            document.getElementById("c2").onkeyup = function () { chak(this, "c2") }
            document.getElementById("c3").onkeyup = function () { chak(this, "c3") }
            document.getElementById("c4").onkeyup = function () { chak(this, "c4") }
            document.getElementById("h1").onkeyup = function () { chak(this, "h1") }
            document.getElementById("h2").onkeyup = function () { chak(this, "h2") }
            document.getElementById("h3").onkeyup = function () { chak(this, "h3") }
            document.getElementById("h4").onkeyup = function () { chak(this, "h4") }

            document.getElementById("c11").onclick = function () { click("1") }
            document.getElementById("c22").onclick = function () { click("2") }
            document.getElementById("c33").onclick = function () { click("3") }
            document.getElementById("c44").onclick = function () { click("4") }
      


        }

    </script>
</head>

<body id="body" class="ggg" onload="loadd()">
    <form id="form1" runat="server">
        <table style="text-align:center;line-height:130%" class="myButton">
            <tr>
                <td colspan="2"> קלוריות ביום</td>
                <td colspan="2"> גרם חלבון ביום</td>
            </tr>
            <tr>
                <td colspan="2"><input style="text-align:center;" value="2900" type="text" id="caloriotDay"></td>
                <td colspan="2"><input style="text-align:center;" value="100" type="text" id="helbonDay"></td>
            </tr>
            <tr>
                <th style=" border-bottom: 5px solid black;" colspan="4"> ארוחה 1</th>
            </tr>
            <tr id="c11">
                <td> קלוריות </td>
                <td><input type="text" disabled="true" value="580" id="c1"></td>
                <td> גרם חלבון </td>
                <td><input type="text" disabled="true" value="20" id="h1"></td>
            </tr>
            <tr>
                <th style=" border-bottom: 5px solid black;" colspan="4"> ארוחה 2</th>
            </tr>
            <tr id="c22">
                <td> קלוריות </td>
                <td><input type="text" disabled="true" value="580" id="c2"></td>
                <td> גרם חלבון </td>
                <td><input type="text" disabled="true" value="20" id="h2"></td>
            </tr>
            <tr>
                <th style=" border-bottom: 5px solid black;" colspan="4"> ארוחה 3</th>
            </tr>
            <tr id="c33">
                <td> קלוריות </td>
                <td><input type="text" disabled="true" value="580" id="c3"></td>
                <td> גרם חלבון </td>
                <td><input type="text" disabled="true" value="20" id="h3"></td>
            </tr>
            <tr>
                <th style=" border-bottom: 5px solid black;" colspan="4"> ארוחה 4</th>
            </tr>
            <tr id="c44">
                <td> קלוריות </td>
                <td><input type="text" disabled="true" value="580" id="c4"></td>
                <td> גרם חלבון </td>
                <td><input type="text" disabled="true" value="20" id="h4"></td>
            </tr>
            <tr>
                <th style=" border-bottom: 5px solid black;" colspan="4"> ארוחה 5</th>
            </tr>
            <tr>
                <td> קלוריות </td>
                <td><input type="text" disabled="true" value="580" id="c5"></td>
                <td> גרם חלבון </td>
                <td><input type="text" disabled="true" value="20" id="h5"></td>
            </tr>
        </table>







        <table id="ateCount" style="text-align:center;visibility: hidden;" class="myButton">
            <tr>
                <td>כמה ארוחות אכלת כבר היום?</td>
                <br>
            </tr>
            <tr>
                <td style="font-size:14px;">
                    <input onchange="crateTable()" type="radio" id="vehicle1" name="vehicle" value="1"><label
                        for="vehicle">1</label>
                    <input onchange="crateTable()" type="radio" id="vehicle2" name="vehicle" value="2"><label
                        for="vehicle">2</label>
                    <input onchange="crateTable()" type="radio" id="vehicle3" name="vehicle" value="3"><label
                        for="vehicle">3</label>
                    <input onchange="crateTable()" type="radio" id="vehicle4" name="vehicle" value="4"><label
                        for="vehicle">4</label>

                </td>
            </tr>
        </table>
        <br>
        <table id="varible" style="text-align:center; visibility: hidden;" class="myButton">

        </table>
        <br>
        <input onclick="load()" type="button" id="submit" value="חשב" class="myButton" style="visibility:hidden ;">
        <br><br><br>
        <table id="sum" style="text-align:center; visibility: hidden;" class="myButton">

        </table>
        </div>
    </form>
</body>

</html>